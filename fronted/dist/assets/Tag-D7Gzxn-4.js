import{_ as S,r as g,o as R,c as w,a as i,b as e,A as x,d as o,C as T,s as z,g as n,h as d,a3 as q,B as A,E as I,k as K,l as c,u,a4 as P,a5 as U,m,a6 as W,t as _,F as b,p as F,q as j,a7 as G,a8 as H,n as J}from"./index-CVtMBCR-.js";import{g as O}from"./tag-DfWCvqEV.js";const Q={class:"tag-page"},X={class:"search-header"},Y={class:"search-container"},Z={class:"search-wrapper"},ee={class:"content-container"},se={class:"tags-section"},te={class:"section-header"},ae={class:"section-title"},oe={class:"tags-count"},le={class:"tags-cloud"},ne=["onClick"],ce={class:"tag-count"},re={class:"sidebar"},ie={class:"hot-tags-card"},de={class:"card-title"},ue={class:"hot-tags-list"},_e=["onClick"],ve={class:"hot-number"},he={class:"hot-tag-text"},pe={__name:"Tag",setup(ge){const V=K(),r=g(""),v=g([]),h=g(!0),B=async()=>{h.value=!0;try{const t=await O({page:1,size:100}),s=await Promise.all((t.list||[]).map(async a=>{try{return{id:a.id,name:a.name,slug:a.slug,color:a.color||"#409EFF",count:a.count||0}}catch{return{id:a.id,name:a.name,slug:a.slug,color:a.color||"#409EFF",count:0}}}));v.value=s}catch(t){console.error("加载标签失败:",t),I.error("加载标签失败")}finally{h.value=!1}};R(()=>{B()});const E=w(()=>[...v.value].sort((t,s)=>s.count-t.count).slice(0,5)),p=w(()=>r.value?v.value.filter(t=>t.name.toLowerCase().includes(r.value.toLowerCase())):v.value),L=t=>t>=40?"size-xl":t>=30?"size-lg":t>=20?"size-md":"size-sm",f=t=>{const s=t.slug||t.name.toLowerCase().replace(/\s+/g,"-");V.push(`/tag/${s}`)};return(t,s)=>{const a=d("el-icon"),y=d("el-button"),D=d("el-empty"),C=d("el-col"),N=d("el-divider"),$=d("el-row"),M=A("loading");return c(),i("div",Q,[e("div",X,[e("div",Y,[e("div",Z,[o(a,{class:"search-icon"},{default:n(()=>[o(u(P))]),_:1}),x(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>r.value=l),type:"text",placeholder:"搜索标签，例如：Vue、React、Docker...",class:"search-input"},null,512),[[q,r.value]]),r.value?(c(),T(y,{key:0,text:"",class:"clear-btn",onClick:s[1]||(s[1]=l=>r.value="")},{default:n(()=>[o(a,null,{default:n(()=>[o(u(U))]),_:1})]),_:1})):z("",!0)])])]),x((c(),i("div",ee,[o($,{gutter:30},{default:n(()=>[o(C,{span:18,xs:24},{default:n(()=>[e("div",se,[e("div",te,[e("h3",ae,[o(a,null,{default:n(()=>[o(u(W))]),_:1}),s[2]||(s[2]=m(" 全部标签 ",-1))]),e("span",oe,_(p.value.length)+" 个标签",1)]),e("div",le,[(c(!0),i(b,null,F(p.value,l=>(c(),i("div",{key:l.id,class:G(["tag-item",L(l.count)]),style:j({"--tag-color":l.color}),onClick:k=>f(l)},[s[3]||(s[3]=e("span",{class:"tag-hash"},"#",-1)),m(_(l.name)+" ",1),e("span",ce,_(l.count),1)],14,ne))),128))]),p.value.length===0?(c(),T(D,{key:0,description:"未找到相关标签"})):z("",!0)])]),_:1}),o(C,{span:6,xs:24},{default:n(()=>[e("div",re,[e("div",ie,[e("h4",de,[o(a,null,{default:n(()=>[o(u(H))]),_:1}),s[4]||(s[4]=m(" 热点标签 ",-1))]),o(N,{class:"card-divider"}),e("ul",ue,[(c(!0),i(b,null,F(E.value,(l,k)=>(c(),i("li",{key:l.id,class:"hot-tag-item",onClick:me=>f(l)},[e("span",ve,_(k+1),1),e("div",he,"#"+_(l.name),1),o(a,{class:"arrow-icon"},{default:n(()=>[o(u(J))]),_:1})],8,_e))),128))])])])]),_:1})]),_:1})])),[[M,h.value]])])}}},Ce=S(pe,[["__scopeId","data-v-bdeac0a8"]]);export{Ce as default};
